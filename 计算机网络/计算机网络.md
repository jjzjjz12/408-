# 计算机网络体系结构

## 计算机网络概念

计算机网络是将众多分散的、自治的计算机系统，通过通信设备与线路连接起来，由功能完善的**软件**实现**资源共享和信息传递**的系统。

1. 计算机网络：由若干个**结点**和连接这些结点的**链路**组成。用**集线器、交换机**可以把**多个结点连接**起来，组成一个计算机网络。
   1. 结点：计算机、集线器（数据冲突）、交换机switch（无数据冲突）、路由器
      1. 集线器、交换机用于连接不同结点，路由器用来连接不同网络。
      2. 家用路由=路由器+交换机+其他
   2. 链路：有线无线
2. 互连网：由**路由器**把多个<font color='red'>**计算机网络互相连接**</font>起来（互连网），形成一个内部网络。可以使用任意协议通信
3. 互联网：由ISP互联网服务提供商组成的<font color='red'>**覆盖全球范围的互连网**</font>,<font color='red'>**必须使用TCP/IP通信**</font>。

![image-20240921215003954](https://jjz125-1314914016.cos.ap-nanjing.myqcloud.com/typora/image-20240921215003954.png)

## 计算机网络的组成

![image-20240922214412818](https://jjz125-1314914016.cos.ap-nanjing.myqcloud.com/typora/image-20240922214412818.png)

## 计算机网络的功能

1. 资源共享
2. 分布式处理
3. 提高可靠性
4. 负载均衡
5. 其他

## 数据交换技术

1. 电路交换：通过物理线路的连接，**<font color='red'>动态地分配传输线路资源</font>**
   1. 建立连接->通信->释放连接
   2. 缺点：
      1. 建立、释放连接，需要额外的时间开销
      2. 独占、线路利用率低
      3. 线路分配灵活性差
      4. 交换节点不支持“差错控制”
   3. 优点：数据传输速率高
2. 报文交换：<font color='red'>**存储转发**</font>的思想，把传送的数据单元**存储进中间节点**，再根据**目的地址**转发至下一节点
   1. 缺点：不定长，不方便存储转发。长报文存储转发时间开销大、缓存开销大。长报文容易出错
   2. 优点：不需要建立连接、线路可灵活分配、不独占线路利用率高、支持差错控制
3. 分组交换：
   1. 优点：报文交换+分组定长，时间缓存开销低，不易出错，重传代价地
   2. 缺点：控制信息占比增加。存在存储转发时延，数据传输速率低。分组可能失序、丢失

## 计算机网络的分类

- 按分布范围分类：<font color='red'>**广域网**</font>、城域网、<font color='red'>**局域网**</font>(以太网)、个域网
- 按拓扑结构分类：
  - <font color='red'>**总线型**</font>:数据以“<u>广播式</u>”传输，存在”<u>总线争用“</u>。典型：**<u>集线器</u>**。
  - **<font color='red'>环形</font>**:数据“<u>广播式</u>”传输，通过"<u>令牌</u>“解决总线争用，令牌环形依次传递，拿到令牌者可使用总线。典型：**<u>令牌环网</u>**
  - <font color='red'>**星形**</font>:"<u>点对点</u>"传输，<u>不存在”总线争用“</u>。典型：以**<u>太网交换机的设备</u>**
  - <font color='red'>**网状**</font>:数据通过各中间结点逐一存储转发，属于”<u>点到点“</u>传输。典型：**<u>广域网</u>**

## 计算机网络的性能指标

### 指标1：速率

<font color='green'>**信道**</font>：表示<font color='red'>**某一方向传送信息的通道**</font>，一条通信线路在逻辑上往往对应一条<font color='red'>**发送信道**和一条**接收信道**。

<font color='green'>**数据率统一单位**</font>：最常用：b/s==bit/s==**bps** 有时候有：B/s(1B=8b,B=Byte,b=bit)。

![image-20240922221148369](https://jjz125-1314914016.cos.ap-nanjing.myqcloud.com/typora/image-20240922221148369.png)

### 指标2：带宽

- 计网：某信道所能传送的<font color='red'>**最高数据率**</font>单位  **<u>*bps*</u>**
- 通信原理：某信道允许通过的<font color='red'>**信号频带范围**</font>  单位 **<u>*Hz*</u>**

### 指标3：吞吐量

指单位时间内通过某个网络的<font color='red'>**实际数据量**</font>

### 指标4：时延

**总时延：发送+传播+处理+排队时延**

节点——信道1（传播时延）——路由器（处理分组-处理时延，处理的数据太多，等待处理-排队时延）

### 指标5：时延带宽积

**传播时延×带宽**   单位： ***<u>bit</u>***.  一条链路中，已从发送端发出但尚未到达接收端的最大比特数。

### 指标6：往返时延RTT

表示从发送方**发送完**数据，到发送方接收到接收方的确认<u>*总共经历*</u>的时间（发送方发送数据的发送时延不计入RTT）

### 指标7：信道利用率

某个信道有**百分之多少的时间**是有数据通过的

有数据t/(有数据t+无数据t)



## 计算机网络分层结构

- 将复杂的计算机网络在逻辑上划分为多个层次，并将各种“功能”安排在合适的层次中
- <font color='red'>不同类型的结点，实现的功能层次可能不一样，如主机5，7，4层，路由器3层</font>
- 物理层、数据链路层、网络层、传输层、应用层
- 实体：工作在**某一层的活动元素**（软件+硬件）。不同机器上的同一层称为对等层
- 协议：网络协议。**控制对等实体之间**通信规则的集合
- 上一层实体通过**<u>接口</u>**，请求相邻下层的**<u>服务</u>**

计算机网络功能复杂，采用分层结构，将不同的功能划分在不同层，对等层通过制定协议以实现功能

- OSI参考模型：7层（法律标准）
- TCP/IP模型：4层（事实标准）
- 五层模型：教学

### OSI参考模型

<font color='red'>**“物联网叔会使用”**</font>：完成数据的分段与重装

报文段（传输层）->分组(网络层)->帧(数据链路层)->比特(物理层)

集线器：1层

交换机：2层

路由器：3层

#### 物理层

实现相邻节点之间的<font color='red'>**比特传输**</font>（网线）

- 定义电路接口的参数（形状、尺寸、引脚）
- 定义传输信号的含义、电器特征(高低电平的01信号)

#### 链路层

确保相邻节点之间链路<font color='red'>**逻辑上无差错**</font>。通过帧，含多个比特（数据比特+校验比特）

- <font color='red'>差错控制</font>,检查+纠错。把比特传给物理层，物理层通过物理传输媒体传给下一个物理层，下一个物理层传给数据链路层，接收方的数据链路层检验校验比特后丢弃或纠错然后接收数据比特上传下一层。以“帧”为单位
- <font color='red'>流量控制</font>。协调两个结点的速率。控制最大帧

#### 网络层

<font color='red'>**把“分组”从源结点转发到目的结点**</font>.。

- <font color='red'>路由选择</font>：构造并维护路由表，决定分组到达目的节点的最佳路径
- <font color='red'>分组转发</font>：将分组从合适的端口转发出去
- 拥塞控制
- 网际互联：实现异构网络互联（每个网络的内部构造不一样，经过路由器处理可以调整）
- 差错控制、流量控制（以<font color='red'>**分组**</font>为单位）、建立连接与释放(**确保分组有序，不重复到达**)、可靠传输管理（**接收方需返回分组确认消息**）

#### 传输层

实现**<u><font color='red'>端到端</font></u>**的通信（实现**<u>进程到进程</u>**的通信，端指<u>端口</u>）

- <font color='red'>**复用和分用**</font>：发送端几个高层实体（软件或硬件）复用一条底层的连接，在接收端再进行分用。（多个进程可以通过端口号请求传输层的服务——复用，一个传输层又可以把接收到的数据分派给对应的进程——分用。以<font color='red'>**报文段**</font>为单位,一个报文段又被拆分成多个分组。比如微信端口8899，要给目的节点端口号8899发送数据，传输层会实现端口号到进程之间映射关系）
- 差错控制、流量控制（以<font color='red'>**报文段**</font>为单位）、建立连接与释放(**确保分组有序，不重复到达**)、可靠传输管理（**接收方需返回分组确认消息**）

#### 会话层

<u>会话管理</u>（采用<u>检查点机制</u>比如传1G的文件传500M没网络了，会话层会检查并记录这个检查点，等网络恢复从这个检查点继续往后传。）

#### 表示层

解决不同主机上信息表示不一致的问题（<u>**数据的格式转换**</u>，把不同的数据格式统一）

#### 应用层

实现特定的网络应用（浏览网页时离不开HTTP协议）

![image-20240925111847147](https://jjz125-1314914016.cos.ap-nanjing.myqcloud.com/typora/image-20240925111847147.png)

### TCP/IP模型

#### 网络接口层

网络硬件的种类繁多，通信技术日新月异，网络层之下的部分具体怎么实现比特流的传输不应该有太多限制。

<font color='red'>**实现相邻结点间的数据传输（为网络层的”分组“传输），<u>但具体怎么传输不做规定</u>**</font>。

#### 网络层

<font color='red'>**路由选择、分组转发**</font>、拥塞控制、网际互联

#### 传输层

数据传输的正确、可靠由传输层负责，压力给到了”网络边缘部分（主机）“

这样网络的核心部分（路由器）的功能简单，负载低

#### 应用层

包含了OSI参考模型的会话层+表示层+应用层，不过会更加<font color='red'>**灵活地应用需要的某些功能**</font>

比如OSI模型会话层的会话管理的断点续传功能可以不使用，表示层的格式转换也不一定每个应用都需要。他会交给应用层的特定协议去实现。

![image-20240925143803279](https://jjz125-1314914016.cos.ap-nanjing.myqcloud.com/typora/image-20240925143803279.png)

![image-20240925143911261](https://jjz125-1314914016.cos.ap-nanjing.myqcloud.com/typora/image-20240925143911261.png)

![image-20240925144122201](https://jjz125-1314914016.cos.ap-nanjing.myqcloud.com/typora/image-20240925144122201.png)

有连接的可靠的服务：也就是说数据传输出现一些错误或者出现丢失是不被允许的。这也是OSI和TCP/IP传输层的一个区别



# 物理层

任务：实现<font color='red'>**相邻结点比特（0、1）的传输**</font>。

## 通信基础

信源：信号的来源——数据发送方

信宿：信号的”归宿“——数据接收方

信道：发送信道、接收信道

信号：数据的载体

- 数字信号：信号值<u>离散</u>——只有高低电压0、1释放电压
- 模拟信号：信号值<u>连续</u>——以函数关系释放电压

<font color='red'>**码元**</font>：表示二进制编码的元素

- 在一个“信号周期”内，有可能出现<u>**2种信号**</u>，每种信号对应一个<u>**二进制数**</u>，每一个信号就是一个“<font color='red'>**码元**</font>”。
- 可以把一个“信号周期”称为<font color='red'>**码元宽度**</font>。
- 4进制码元：在一个“信号周期”内，有可能出现<u>**4种信号**</u>，每种信号对应一个<u>**4进制数**</u>（2bit）类似还有8、16进制码元
- <font color='green'>**1码元=log₂nKbit**</font>：一个”<u>周期</u>“内可能出现<font color='red'><u>**k种信号**</u></font>

<font color='red'>**速率**</font>：

- **波特率**：每秒传输率几个码元。单位：码元/秒
- **比特率**：每秒传输了几个比特。单位：比特/秒

![image-20240925213037250](https://jjz125-1314914016.cos.ap-nanjing.myqcloud.com/typora/image-20240925213037250.png)



























